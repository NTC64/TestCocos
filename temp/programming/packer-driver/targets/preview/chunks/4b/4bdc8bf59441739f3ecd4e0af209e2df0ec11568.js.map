{"version":3,"sources":["file:///D:/Creator/source/Test/assets/script/circle.ts"],"names":["_decorator","Component","Vec3","input","Input","tween","sounds","ccclass","property","MovingCircle","isMovingBack","myTween","start","on","EventType","MOUSE_DOWN","onMouseDown","moveCircle","moveTime","node","stop","startPosition","endPosition","to","position","call","clip","onAudioQueue","moveBack","event","v","s","getButton","x","Math","abs"],"mappings":"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","sourcesContent":["import { _decorator, Component, Vec3, input, Input, tween } from 'cc';\r\nimport { sounds } from './sounds';\r\nconst { ccclass,property } = _decorator;\r\n\r\n@ccclass('MovingCircle')\r\nexport class MovingCircle extends Component {\r\n    @property(sounds)\r\n    public clip: sounds;\r\n    private isMovingBack: boolean = false;\r\n    private myTween: any = null;\r\n    start() {\r\n        input.on(Input.EventType.MOUSE_DOWN, this.onMouseDown, this);\r\n        this.moveCircle(1);\r\n    }\r\n\r\n    moveCircle(moveTime) {\r\n        if (this.isMovingBack) {\r\n            tween(this.node).stop();\r\n            this.isMovingBack = false;\r\n        }\r\n        const startPosition = new Vec3(-196.558, -126.931, 0);\r\n        const endPosition = new Vec3(197.03, -126.931, 0);\r\n        this.myTween=tween(this.node)\r\n            .to(moveTime, { position: endPosition })\r\n            .call(() => {\r\n                this.clip.onAudioQueue(4);\r\n                this.moveBack(1);\r\n            })\r\n            .start();\r\n    }\r\n\r\n    moveBack(moveTime) {\r\n        if (!this.isMovingBack) {\r\n            tween(this.node).stop();\r\n            this.isMovingBack = true;\r\n        }\r\n        const startPosition = new Vec3(-196.558, -126.931, 0);\r\n        const endPosition = new Vec3(197.03, -126.931, 0);\r\n       this.myTween= tween(this.node)\r\n            .to(moveTime, { position: startPosition })\r\n            .call(() => {\r\n                this.clip.onAudioQueue(4);\r\n                this.moveCircle(1);\r\n            })\r\n            .start();\r\n    }\r\n    onMouseDown(event) {\r\n        const v= (197.03+196.558)/60;\r\n        let s=0;\r\n        if (event.getButton() === 0) {\r\n            this.clip.onAudioQueue(1);\r\n          this.myTween.stop();\r\n            if (this.isMovingBack) {\r\n                if(this.node.position.x >=0){\r\n                    s = 197.04-this.node.position.x;\r\n                    this.moveCircle((s/v)/60);\r\n                }\r\n                else{\r\n                    s=Math.abs(this.node.position.x)+197.03;\r\n                    this.moveCircle((s/v)/60);\r\n                }\r\n            } else {\r\n                if(this.node.position.x >=0){\r\n                  \r\n                    s = 196.558+this.node.position.x;\r\n                    this.moveBack((s/v)/60);\r\n                }\r\n                else{\r\n                    s=196.559-Math.abs(this.node.position.x);\r\n                    this.moveBack((s/v)/60);\r\n                }\r\n            \r\n            }\r\n        }\r\n    }\r\n}"]}